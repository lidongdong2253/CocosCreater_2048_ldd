{"version":3,"sources":["../../../../../assets/Scripts/Scenes/assets/Scripts/Scenes/Gamescene.js"],"names":["cc","Class","extends","Component","properties","Block","Prefab","TouchNode","Score","Label","Highest_Score","GameBg","Sprite","Score_num","Highest_Score_Num","Moveing","AgainStart","Button","GameOver","Node","onLoad","createrBgBlock","addTouchEvent","initColor","getComponent","init","start","initData","sys","localStorage","getItem","string","updateSocreScore","bgSize","winSize","width","betweenWith","size","blockSize","x","y","blockPosition","bgTouch","instantiate","setContentSize","setPosition","height","node","addChild","s","push","h","a","getChildByName","active","p","setOpacity","colors","color","block","length","destroy","data","log","addBlock","updateHighestScore","setItem","getIdlePosition","IdlePosition","isGameOver","n","s1","h1","num","Math","floor","random","Number","undefined","b","setColor","scaleX","scaleY","scale","scaleTo","runAction","self","on","event","getLocation","startLocation","touchStartTime","Date","now","eventTouchCallbacke","Time","endLocation","distanceLocation","moveXY","abs","leftMoveX","rightMoveX","downMoveY","upMoveY","isMove","twoMerge","move","callback","moveAction","mergeAction","willMove","totalNum","i","finishMove","pos","m","moveTo","finished","callFunc","sequence","b1","b2","scale1","scale2","mid","moved","show","againStart"],"mappings":"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","file":"Gamescene.js","sourceRoot":"../../../../../assets/Scripts/Scenes","sourcesContent":["\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        Block : cc.Prefab,\n        TouchNode : cc.Prefab,\n        Score : cc.Label,\n        Highest_Score : cc.Label,\n        GameBg : cc.Sprite,\n        Score_num : 0,\n        Highest_Score_Num : 0,\n        Moveing:false,\n        AgainStart:cc.Button,\n        GameOver:cc.Node\n\n    },\n    onLoad () {\n        //创建初始化方块的背景 小方块\n        this.createrBgBlock();\n        //添加触摸事件\n        this.addTouchEvent();\n        //初始化颜色\n        this.initColor();\n        //初始化gameOver\n        this.GameOver.getComponent('GameOver').init(this)\n\n    },\n    start () {\n        //初始化数据\n        this.initData()\n        // this.GameOver = cc.find(\"GameOver\")\n        //获取本地存储的最高分\n        this.Highest_Score_Num = cc.sys.localStorage.getItem('Highest_Score_Num');\n        if (!this.Highest_Score_Num) {\n            this.Highest_Score_Num = 0;\n        }\n        this.Highest_Score.getComponent(cc.Label).string = this.Highest_Score_Num;\n        this.Score_num = 0\n        this.updateSocreScore()\n    },\n     //创建初始化方块的背景 小方块\n    createrBgBlock(){\n        //大背景的宽和高 \n        var bgSize = cc.winSize.width\n        // 方块之间的距离\n        var betweenWith = 20;\n        // 获取方块的大小\n        var size = (bgSize - 5*betweenWith)/4;\n        this.blockSize = size\n        //第一个方块的位置x，y\n        var x = -bgSize*.5 + size*.5 + betweenWith ;\n        // var y = -cc.winSize.height*.5+ size*.5 + betweenWith;\n        var y = -bgSize*.5 + size*.5 + betweenWith\n        //存储方块的位置\n        this.blockPosition = []\n        //for循环 是为了初始化方块背景界面（16）个 \n        //并且把他们的位置存储到this.blockPosition数组种\n        /*\n        s 代表y轴\n        h 代表x轴\n        */\n        this.bgTouch = cc.instantiate(this.TouchNode)\n        this.bgTouch.setContentSize(bgSize,bgSize)\n        this.bgTouch.setPosition(0,-cc.winSize.height*.5 + bgSize*.5 + 100 )\n        // this.bgTouch.setColor(cc.color(255,255,255,255))\n        this.node.addChild(this.bgTouch)\n        for (var s = 0; s < 4; s++) {\n            //push 就是添加到数组中\n            this.blockPosition.push([]);\n            for (var h = 0; h < 4; h++) {\n                var a = cc.instantiate(this.Block)\n                a.setContentSize(size,size)\n                a.getChildByName(\"Num\").active = false\n                this.blockPosition[s].push(cc.p(x, y));\n                a.setPosition(cc.p(x, y));\n                a.setOpacity(111);\n                x += (size + betweenWith);\n                this.bgTouch.addChild(a);\n            }\n            y += (size + betweenWith);\n            x = -bgSize*.5 + size*.5 + betweenWith ;            \n        }\n        // cc.log(this.blockPosition)        \n    },\n     /// 颜色数据\n     initColor: function() {\n        this.colors = [];\n        this.colors[2] = cc.color(4,222,173,255);\n        this.colors[4] = cc.color(255,87,34,255);\n        this.colors[8] = cc.color(255,146,205,255);\n        this.colors[16] = cc.color(194,56,181,255);\n        this.colors[32] = cc.color(255,166,106,255);\n        this.colors[64] = cc.color(124,189,30,255);\n        this.colors[128] = cc.color(0,153,4,255);\n        this.colors[256] = cc.color(0,160,233,255);\n        this.colors[512] = cc.color(299,0,79,255);\n        this.colors[1024] = cc.color(214,215,98,255);\n        this.colors[2048] = cc.color(219,0,139,255);\n    },\n     //初始化数据\n    initData:function(){\n        if (this.block) {\n            for(var s = 0;s < this.block.length; s++){\n                for (var h = 0;h < this.block[s].length;h++){\n                    if (this.block[s][h]) {\n                        this.block[s][h].destroy();\n                    }\n                }\n            }\n        }\n         /*\n        s 代表y轴\n        h 代表x轴\n        */\n        this.data = [];\n        this.block = [];\n        for (var s = 0; s < 4; s++){\n            this.data.push([]);\n            this.block.push([]);\n            for (var h = 0; h < 4; h++) {\n                this.data[s].push(0)\n                this.block[s].push(null)\n            }\n        }\n        cc.log(this.data)\n        //添加小方块\n        this.addBlock()\n        this.addBlock()\n        this.addBlock()\n        // this.addBlock()\n        // this.addBlock()\n        // this.addBlock()\n        // this.addBlock()\n        // this.addBlock()\n        // this.addBlock()\n        // this.addBlock()\n        // this.addBlock()\n        // this.addBlock()\n        // this.addBlock()\n        // this.addBlock()\n        // this.addBlock()\n        // this.addBlock()\n    },\n\n    updateSocreScore: function() {\n        this.Score.getComponent(cc.Label).string = this.Score_num;\n    },\n    /**\n     * 更新最高分数\n     */\n    updateHighestScore: function() {\n        if (this.Score_num > this.Highest_Score_Num) {\n            this.Highest_Score_Num = this.Score_num;\n            this.Highest_Score.getComponent(cc.Label).string = this.Highest_Score_Num;\n            cc.sys.localStorage.setItem('Highest_Score_Num', this.Highest_Score_Num);\n        }\n    },\n    // 获取空闲的位置\n    getIdlePosition:function(){\n        var IdlePosition =[];\n        cc.log(\"data=====\"+this.data.length);\n        for(var s = 0;s < this.data.length;s++ ){\n            for(var h = 0; h < this.data[s].length;h++){\n                if(this.data[s][h] == 0){\n                    IdlePosition.push(s*4 + h);\n                }\n            }\n        }\n        cc.log(\"IdlePosition....\"+IdlePosition)\n        return IdlePosition\n    },\n    //判断游戏结束\n    isGameOver:function(){\n        for(var s = 0;s < 4; s++){\n            for (var h = 0;h < 4;h++){\n                var n = this.data[s][h]\n                //上面的比较\n                if(this.data[s][h] == 0){\n                    return false\n                }\n                if(s + 1 <= 3){\n                    if (n == this.data[s+1][h] ) {\n                        return false\n                    }\n                }\n                //右边的比较\n                if(h+1 <= 3){\n                    if (n == this.data[s][h+1] ) {\n                        return false\n                    }\n                }\n                //下面的比较\n                if(s-1>=0){\n                    if (n == this.data[s-1][h] ) {\n                        return false\n                    }    \n                }\n                //左边的比较\n                if(h-1>=0){\n                    if (n == this.data[s][h-1] ) {\n                        return false\n                    }\n                }\n            }\n        }\n        return true\n    },\n    //添加小方块\n     /*\n        s1 代表y轴\n        h1 代表x轴\n        num {0,1}代表 2，4\n        */\n    addBlock:function(s1 ,h1,num){\n        var IdlePosition = this.getIdlePosition()\n        if(IdlePosition.length == 0){\n            cc.log(\"没有位置了\")\n            return false;\n        }\n        //获取 0 ——IdlePosition.length 的随机数\n        var p = Math.floor(Math.random()*IdlePosition.length)\n        p = IdlePosition[p]\n        //Math.floor(n)获取小于等于n的整数\n        var s= Math.floor(p/4);\n        var h = Math.floor(p%4);\n        s = s1||s\n        h = h1||h\n        cc.log(\"随机 --位置\"+p)\n        cc.log(\"随机 --s位置\"+s)\n        cc.log(\"随机 --h位置\"+h)\n        var Number = [2,2,2,2,2,2,4,2,2,2];\n        var n = Math.floor(Math.random()*Number.length)\n        if(num != undefined){\n            n = num;\n        }\n        var b = cc.instantiate(this.Block);\n        b.setPosition(this.blockPosition[s][h]);\n        b.setColor(this.colors[Number[n]])\n        b.setContentSize(this.blockSize,this.blockSize)\n        b.getChildByName(\"Num\").getComponent(cc.Label).string = Number[n]\n        this.bgTouch.addChild(b)\n        this.data[s][h] = Number[n]\n        this.block[s][h] = b\n        b.scaleX = 0;\n        b.scaleY = 0;\n        var scale = cc.scaleTo(0.1, 1, 1);\n        b.runAction(scale);\n        \n        return true\n    },\n    addTouchEvent:function(){\n        //必须用self = this  不然下面的函数没有办法调用\n        var self = this\n        //触摸事件 --开始\n        this.bgTouch.on(\"touchstart\",function(event){\n            cc.log(\"strart---->\"+event.getLocation().x)\n            //获取开始点击点\n            this.startLocation = event.getLocation()\n            //获取开始触摸的时间\n            this.touchStartTime = Date.now();\n            return true\n        });\n        //触摸事件 --移动\n        this.bgTouch.on(\"touchmove\",function(event){\n            cc.log(\"move--->\"+event.getLocation().x)\n        });\n        var eventTouchCallbacke = function(event){\n            cc.log(\"end---->\"+event.getLocation().x)\n            cc.log(self.Moveing)\n            var Time = Date.now() - this.touchStartTime\n            if (Time < 600) {\n                if(self.Moveing){\n                    return\n                }\n                var endLocation = event.getLocation()\n                var distanceLocation = cc.p((endLocation.x - this.startLocation.x),(endLocation.y - this.startLocation.y))\n                var moveXY = 50;//最小移动50\n                cc.log(\"x===\"+distanceLocation.x)\n                cc.log(\"y===\"+distanceLocation.y)\n                if(Math.abs(distanceLocation.x) > Math.abs(distanceLocation.y)){\n                    cc.log(\"x 左右移动\")\n                    if(distanceLocation.x < -moveXY){\n                        cc.log(\"右 --> 左\")\n                        self.Moveing = true\n                        self.leftMoveX()\n                    }else if(distanceLocation.x > moveXY){\n                        cc.log(\"左 --> 右\")\n                        self.Moveing = true\n                        self.rightMoveX()\n                    }\n                }\n                else{\n                    if(distanceLocation.y < -moveXY){\n                        self.Moveing = true\n                        cc.log(\"上--> 下\")\n                        self.downMoveY();\n                    }else if(distanceLocation.y > moveXY){\n                        cc.log(\"下 --> 上\")\n                        self.Moveing = true\n                        self.upMoveY()\n                    }\n                }\n            }\n        }\n        //触摸事件 --结束\n        this.bgTouch.on(\"touchend\",eventTouchCallbacke);\n        //触摸事件  --离开屏幕外\n        this.bgTouch.on(\"touchcancel\",eventTouchCallbacke);\n        \n    },\n\n    //向下运动\n    downMoveY:function(){\n        var self = this\n        var isMove = false\n        //避免2次合并\n        var twoMerge =[]\n        for (var s = 0; s < 4; s++){\n            twoMerge.push([]);\n            for (var h = 0; h < 4; h++) {\n                twoMerge[s].push(0)\n            }\n        }\n        var move = function(s,h,callback){\n            cc.log(\"11111111111x=\"+s)\n            cc.log(\"y = =\"+ h)\n            if(s == 0){\n                callback();\n                return;\n            }\n            else if(self.data[s-1][h]!=0&&self.data[s-1][h]!= self.data[s][h]){\n                callback();\n                return;\n            }\n            else if(self.data[s-1][h] == self.data[s][h]&&!twoMerge[s-1][h]){\n                twoMerge[s-1][h] = 1;\n                self.data[s-1][h] = self.data[s-1][h] * 2;\n                self.data[s][h] = 0;\n                var block = self.block[s][h];\n                self.block[s][h] = null;\n                var p = self.blockPosition[s-1][h]\n                self.moveAction(block,p,function(){\n                    self.mergeAction(block,self.block[s-1][h],self.data[s-1][h],callback)\n                })\n                isMove = true\n            }\n            else if(self.data[s-1][h] == 0){\n                self.data[s-1][h] = self.data[s][h]\n                self.data[s][h] = 0;\n                var block = self.block[s][h];\n                self.block[s-1][h] = block;\n                cc.log(self.blockPosition[s-1][h])\n                cc.log(self.blockPosition[s][h])\n                self.block[s][h] = null;\n                var p = self.blockPosition[s-1][h]\n                self.moveAction(block,p,function(){\n                    move(s-1,h,callback)\n                })\n                isMove = true\n            }else\n            {\n                callback();\n            }\n        }\n        //将要移动的方块\n        var willMove = [];\n        //移动方块的总数\n        var totalNum = 0;\n        var num = 0;\n        for(var s = 0;s < 4;s ++){\n            for(var h = 0;h < 4;h++){\n                if(this.data[s][h] != 0){\n                    willMove.push(cc.p(s,h))\n                    totalNum += 1;\n                }\n            }\n        }\n        for(var i = 0;i < willMove.length;i++){\n            var s = willMove[i].x\n            var h = willMove[i].y\n            move(s,h,function(){\n                num +=1;\n                if(totalNum == num){\n                    self.finishMove(isMove)\n                }\n            })\n        }\n    },\n    //向上运动\n    upMoveY:function(){\n        var self = this\n        var isMove = false\n        //避免2次合并\n        var twoMerge =[]\n        for (var s = 0; s < 4; s++){\n            twoMerge.push([]);\n            for (var h = 0; h < 4; h++) {\n                twoMerge[s].push(0)\n            }\n        }\n        var move = function(s,h,callback){\n            cc.log(\"11111111111x=\"+s)\n            cc.log(\"y = =\"+ h)\n            if(s == 3){\n                callback();\n                return;\n            }\n            else if(self.data[s+1][h]!=0&&self.data[s+1][h]!= self.data[s][h]){\n                callback();\n                return;\n            }\n            else if(self.data[s+1][h] == self.data[s][h]&&!twoMerge[s+1][h]){\n                twoMerge[s+1][h] = 1\n                self.data[s+1][h] = self.data[s+1][h] * 2\n                self.data[s][h] = 0;\n                var block = self.block[s][h];\n                self.block[s][h] = null;\n                var p = self.blockPosition[s+1][h]\n                self.moveAction(block,p,function(){\n                    self.mergeAction(block,self.block[s+1][h],self.data[s+1][h],callback)\n                })\n                isMove = true\n            }\n            else if(self.data[s+1][h] == 0){\n                self.data[s+1][h] = self.data[s][h]\n                self.data[s][h] = 0;\n                var block = self.block[s][h];\n                self.block[s+1][h] = block;\n                cc.log(self.blockPosition[s+1][h])\n                cc.log(self.blockPosition[s][h])\n                self.block[s][h] = null;\n                var p = self.blockPosition[s+1][h]\n                self.moveAction(block,p,function(){\n                    move(s+1,h,callback)\n                })\n                isMove = true\n            }else\n            {\n                callback();\n            }\n        }\n        //将要移动的方块\n        var willMove = [];\n        //移动方块的总数\n        var totalNum = 0;\n        var num = 0;\n        for(var s = 3; s >= 0;s = s-1){\n            for(var h = 3;h >= 0;h = h-1){\n                if(this.data[s][h] != 0){\n                    willMove.push(cc.p(s,h))\n                    totalNum += 1;\n                }\n            }\n        }\n        for(var i = 0;i < willMove.length;i++){\n            var s = willMove[i].x\n            var h = willMove[i].y\n            move(s,h,function(){\n                num +=1;\n                if(totalNum == num){\n                    self.finishMove(isMove)\n                }\n            })\n        }\n    },\n     //向左运动\n     leftMoveX:function(){\n        var self = this\n        var isMove = false\n        //避免2次合并\n        var twoMerge =[]\n        for (var s = 0; s < 4; s++){\n            twoMerge.push([]);\n            for (var h = 0; h < 4; h++) {\n                twoMerge[s].push(0)\n            }\n        }\n        var move = function(s,h,callback){\n            cc.log(\"11111111111x=\"+s)\n            cc.log(\"y = =\"+ h)\n            if(h == 0){\n                callback();\n                return;\n            }\n            else if(self.data[s][h-1]!=0&&self.data[s][h-1]!= self.data[s][h]){\n                callback();\n                return;\n            }\n            else if(self.data[s][h-1] == self.data[s][h]&&!twoMerge[s][h-1]){\n                twoMerge[s][h-1] = 1\n                self.data[s][h-1] = self.data[s][h-1] * 2\n                self.data[s][h] = 0;\n                var block = self.block[s][h];\n                self.block[s][h] = null;\n                var p = self.blockPosition[s][h-1]\n                self.moveAction(block,p,function(){\n                    self.mergeAction(block,self.block[s][h-1],self.data[s][h-1],callback)\n                })\n                isMove = true\n            }\n            else if(self.data[s][h-1] == 0){\n                self.data[s][h-1] = self.data[s][h]\n                self.data[s][h] = 0;\n                var block = self.block[s][h];\n                self.block[s][h-1] = block;\n                cc.log(self.blockPosition[s][h-1])\n                cc.log(self.blockPosition[s][h])\n                self.block[s][h] = null;\n                var p = self.blockPosition[s][h-1]\n                self.moveAction(block,p,function(){\n                    move(s,h-1,callback)\n                })\n                isMove = true\n            }else\n            {\n                callback();\n            }\n        }\n        //将要移动的方块\n        var willMove = [];\n        //移动方块的总数\n        var totalNum = 0;\n        var num = 0;\n        for(var s = 0;s < 4;s ++){\n            for(var h = 0;h < 4;h++){\n                if(this.data[s][h] != 0){\n                    willMove.push(cc.p(s,h))\n                    totalNum += 1;\n                }\n            }\n        }\n        for(var i = 0;i < willMove.length;i++){\n            var s = willMove[i].x\n            var h = willMove[i].y\n            move(s,h,function(){\n                num +=1;\n                if(totalNum == num){\n                    self.finishMove(isMove)\n                }\n            })\n        }\n    },\n     //向右运动\n     rightMoveX:function(){\n        var self = this\n        var isMove = false\n        //避免2次合并\n        var twoMerge =[]\n        for (var s = 0; s < 4; s++){\n            twoMerge.push([]);\n            for (var h = 0; h < 4; h++) {\n                twoMerge[s].push(0)\n            }\n        }\n        var move = function(s,h,callback){\n            cc.log(\"11111111111x=\"+s)\n            cc.log(\"y = =\"+ h)\n            if(h == 3){\n                callback();\n                return;\n            }\n            else if(self.data[s][h+1]!=0&&self.data[s][h+1]!= self.data[s][h]){\n                callback();\n                return;\n            }\n            else if(self.data[s][h+1] == self.data[s][h]&&!twoMerge[s][h+1]){\n                \n                twoMerge[s][h+1] = 1\n                self.data[s][h+1] = self.data[s][h+1] * 2\n                self.data[s][h] = 0;\n                var block = self.block[s][h];\n                self.block[s][h] = null;\n                var p = self.blockPosition[s][h+1]\n                self.moveAction(block,p,function(){\n                    self.mergeAction(block,self.block[s][h+1],self.data[s][h+1],callback)\n                })\n                isMove = true\n            }\n            else if(self.data[s][h+1] == 0){\n                self.data[s][h+1] = self.data[s][h]\n                self.data[s][h] = 0;\n                var block = self.block[s][h];\n                self.block[s][h+1] = block;\n                cc.log(self.blockPosition[s][h+1])\n                cc.log(self.blockPosition[s][h])\n                self.block[s][h] = null;\n                var p = self.blockPosition[s][h+1]\n                self.moveAction(block,p,function(){\n                    move(s,h+1,callback)\n                })\n                isMove = true\n            }else\n            {\n                callback();\n            }\n        }\n        //将要移动的方块\n        var willMove = [];\n        //移动方块的总数\n        var totalNum = 0;\n        var num = 0;\n        for(var s = 3; s >= 0;s = s-1){\n            for(var h = 3;h >= 0;h = h-1){\n                if(this.data[s][h] != 0){\n                    willMove.push(cc.p(s,h))\n                    totalNum += 1;\n                }\n            }\n        }\n        for(var i = 0;i < willMove.length;i++){\n            var s = willMove[i].x\n            var h = willMove[i].y\n            move(s,h,function(){\n                num +=1;\n                if(totalNum == num){\n                    self.finishMove(isMove)\n                }\n            })\n        }\n    },\n    /**\n     * 移动操作\n     */\n    moveAction: function(block, pos, callback) {\n        var m = cc.moveTo(0.08, pos);\n        var finished = cc.callFunc(function() {\n            callback();\n        });\n        block.runAction(cc.sequence(m, finished));\n    },\n     /**\n     * 合并操作\n     */\n    mergeAction: function(b1, b2, num, callback) {\n        var self = this;\n        b1.destroy(); // 合并后销毁\n        var scale1 = cc.scaleTo(0.1,1.2);\n        var scale2 = cc.scaleTo(0.1, 1);\n        var mid = cc.callFunc(function() {\n            b2.setColor(self.colors[num]);\n            b2.getChildByName('Num').getComponent(cc.Label).string = num;\n        });\n        var finished = cc.callFunc(function() {\n            self.Score_num += num\n            \n            callback();\n        });\n        b2.runAction(cc.sequence(scale1, mid, scale2, finished));\n    },\n    /**\n     * 完成移动后的操作\n     */\n    finishMove: function(moved) {\n        cc.log('finishMove');        \n        if (moved) {\n            this.updateSocreScore()\n            this.updateHighestScore()\n            this.addBlock();\n        }else{\n           \n        }\n        if(this.isGameOver()){\n            cc.log(\"游戏结束\")\n            // this.AgainStart.setPosition(0,0)\n            // this.GameOver.active = true\n            this.GameOver.getComponent('GameOver').show()        \n        }\n        this.Moveing = false\n        \n    },\n    againStart:function(){\n        cc.log(\"重新开始====\")\n        this.initData()\n        this.Score_num = 0\n        this.updateSocreScore()\n        // this.GameOver.getComponent('GameOver').hidden()  \n    }\n    // update (dt) {},\n});\n"]}